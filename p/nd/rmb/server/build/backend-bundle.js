!function(e){var t={};function s(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(o,r,function(t){return e[t]}.bind(null,r));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=8)}([function(e,t,s){const o={name:"3AT1",port:27017,mysqlPort:33060,mysqlHost:"0.0.0.0",mysqlUser:"root",mysqlPass:"password",mysqlPooling:!0,mysqlMaxPoolSize:10,host:"127.0.0.1",system:"mysql",user:"u2",pwd:"pwd2"},r="/infra/modules/",n="/infra/services/",c="/client/modules/",i="/client/services/",u="/infra/data/db/fs/",l="/infra/data/db/csv/",a="/client/src/lib/",d="/node_modules",p="/dist/client/prod/";e.exports={common:{clientPresentation:a,rootNmPath:d,rootPath:"",serverInfraModulesPath:r,serverInfraServicesPath:n,serverClientModulesPath:c,serverClientServicesPath:i,staticAssetsPath:p,viewEngine:"ejs",viewPath:p},modules:{index:{routePath:c+"index/route"},test:{routePath:r+"test/route"},user:{routePath:c+"user/route",ngAppPath:a+"login/index.js"},protectedRoute:{routePath:c+"protectedRoute/route"},crudFile:{routePath:r+"crud/fs/route"},crudDb:{userSession:!1,name:o.name,user:o.user,pwd:o.pwd,currentDbSystem:o.system,host:o.host,port:o.port,mdb:{url:"mongodb://"+o.domain+":"+o.port,urlDb:"mongodb://"+o.domain+":"+o.port+"/"+o.name,dataPath:"C:/f/tools/mongo/data/",logsPath:"C:/f/tools/mongo/logs.log",routePathT1:r+"crud/mDb/t1/route",routePathT2:r+"crud/mDb/t2/route",routePath:r+"crud/mDb/route"},ms:{routePathT1:r+"crud/msDb/t1/route",routePathT2:r+"crud/msDb/t2/route"}},errorPages:{routePath:r+"errorPages/route"},childProcess:{routePath:r+"childProcess/route"}},db:{config:{ms:{host:o.mysqlHost,port:o.mysqlPort,user:o.mysqlUser,pass:o.mysqlPass,dbName:o.name,pooling:o.mysqlPooling,poolMaxSize:o.mysqlMaxPoolSize}},session:{fsPath:u+"session.json"},users:{fsPath:u+"users.json",csvPath:l+"users.csv",csvInfoPath:l+"userInfo.csv",csvRelationPath:l+"userRelation.csv"},posts:{fsPath:u+"posts.json",csvPath:l+"posts.csv",collectionName:"posts"},auth:{fsPath:u+"auth.json"},test:{resetDataThresHold:1,fsPath1:u+"sample-big-data.json",fsPath2:u+"sample-mid-data.json"}},tools:{express:s(10),browserSync:s(11),bodyParser:s(12),cookieParser:s(13),csvParse:s(14),debug:s(15),duplex:s(2).Duplex,fastCsv:s(16),fs:s(17),mongoDb:s(3),mongoClient:s(3).MongoClient,promisify:s(18).promisify,readableStream:s(2).Readable,through2:s(19),url:s(20),writeableStream:s(2).Writable},errorHandler:{default:(e,t,s,o)=>{t.status(e.status||500),t.render("error",{message:e.message,error:{}})},dev:(e,t,s,o)=>{t.status(e.status||500),t.render("error",{message:e.message,error:{}})},404:(e,t,s)=>{let o=new Error("404");o.status=404,s(o)}}}},function(e,t){function s(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}s.keys=function(){return[]},s.resolve=s,e.exports=s,s.id=1},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("mongodb")},function(e,t,s){const o=s(0),r=s(5),n=s(6),c=(s(7),s(27));let i=function(){return class{connect(e=null){switch(e){case"mysql":return n.connect(o.modules.crudDb.currentDbSystem);case"mongo":return r.connect(o.modules.crudDb.currentDbSystem);default:return r.connectMongo(o.modules.crudDb.currentDbSystem)}}static closeDbConnection(){(new c).close()}static prepareServerStart(){(new c).init()}}}();e.exports=i},function(e,t,s){const o=s(0);var r=null,n=null;let c=function(){return class{static closeDbConnection(){n&&(n.close(),r=null,n=null)}static getDbObject(){return r||null}static setDbObject(e){return r?null:r=e}static getDbConnect(){return n||null}static setDbConnect(e){n=e}static connectMongo(){var e=o.tools.mongoDb.MongoClient,t="mongodb://";t+=o.modules.crudDb.user,t+=":",t+=o.modules.crudDb.pwd,t+="@",t+=o.modules.crudDb.host,t+=":",t+=o.modules.crudDb.port,t+="/",t+=o.modules.crudDb.name;try{return e.connect(t,{useNewUrlParser:!0})}catch(e){console.log("Db connection error")}}}}();e.exports=c},function(e,t,s){const o=s(0);var r=s(25);let n=function(){var e=null;return class{static closeDbConnection(){e&&(e.close(),null,e=null)}static getDbObject(e){return new r(null).getDbObject(e)}static setDbObject(e){e}static getDbConnect(e=null){return new r(null).getDbConnect()}static setDbConnect(e,t){dbConnec=e}static async connect(){var e,t;e={host:o.db.config.ms.host,port:o.db.config.ms.port,user:o.db.config.ms.user,password:o.db.config.ms.pass},t={pooling:{enabled:o.db.config.ms.pooling,maxSize:o.db.config.ms.poolMaxSize}},new r(e,t)}}}();e.exports=n},function(e,t,s){s(0);let o=function(){return class{static e(e){console.log(e)}}}();e.exports=o},function(e,t,s){e.exports=s(9)},function(e,t,s){const o=s(0),r=s(21);let n=o.tools.express();r.setExpressAppLocals(n),r.setExpressAppGlobals(n),r.initSession(n),n.use(o.tools.express.static(o.common.staticAssetsPath)),r.addRoutes(n),r.addNodeEvents(n),n.use(function(e,t,s){s()}),r.customEvents(n),n.listen(n.get("port"),()=>{o.tools.browserSync({open:!1,port:n.get("port")+1,proxy:"localhost:"+n.get("port"),ui:!1}),n.emit("serverLive","anyArgs")}),e.exports=n},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("browser-sync")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("csv-parse")},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("fast-csv")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("through2")},function(e,t){e.exports=require("url")},function(e,t,s){const o=s(22),r=s(28),n=s(30),c=s(31),i=s(4),u=s(32);let l=function(){return class{static customEvents(e){e.on("serverLive",e=>{i.prepareServerStart()})}static addNodeEvents(e){o.init(e)}static initSession(e){u.init(e)}static addRoutes(e){r.init(e)}static setExpressAppLocals(e){c.init(e)}static setExpressAppGlobals(e){n.init(e)}}}();e.exports=l},function(e,t,s){const o=s(23);s(24);let r=function(){return class{static registerProcessEvents(){process.on("uncaughtException",e=>{console.log("Error catch at node-events-core"),console.error("whoops! There was an uncaught error",e)}),process.on("unhandledRejection",function(e,t){console.error("Error catch at node-events-core"),console.error("Unhandled rejection",{reason:e,promise:t})})}static registerErrorEvents(){}static registerDbEvents(){}static registerClusterEvents(){}static registerAppEvents(e){new o(e)}static init(e){this.registerProcessEvents(),this.registerAppEvents(e),this.registerErrorEvents(),this.registerDbEvents(),this.registerClusterEvents()}}}();e.exports=r},function(e,t){let s=function(){return class{checkExpectation(e,t){}clientError(e,t){}close(e,t){}connect(e,t,s){}connection(e){}request(e,t){}upgrade(e,t,s){}init(e){e.on("checkExpectation",this.checkExpectation),e.on("clientError",this.clientError),e.on("close",this.close),e.on("connect",this.connect),e.on("connection",this.connection),e.on("request",this.request),e.on("upgrade",this.upgrade)}constructor(e){this.init(e)}}}();e.exports=s},function(e,t,s){const o=s(4);let r=function(){return class{static closeDb(){o.closeDbConnection()}}}();e.exports=r},function(e,t,s){const o=s(0),r=s(26);let n=function(){if(void 0===e)var e=null,t=null;else console.log("DbConnectionCoreHelperInstance already exists");return class{close(){t&&(t.close(),t=null)}getDbObject(e){t&&t.getSession().then(t=>{e(t.getSchema(o.db.config.ms.dbName))})}getDbConnect(e){t&&t.getSession().then(t=>{e(t)})}getClient(){return t}setClient(e){t=Object.create(e)}init(e,t,s){this.setClient(r.getClient(e,t))}constructor(t=null,s=null,o=null){return e||(this.init(t,s,o),e=this),e}}}();e.exports=n},function(e,t){e.exports=require("@mysql/xdevapi")},function(e,t,s){const o=s(0),r=s(5),n=s(6);s(7);let c=function(){if(void 0===e)var e=null;else console.log("DbServerCoreHelperInstance already exists");return class{close(){"mysql"===o.modules.crudDb.currentDbSystem?n.closeDbConnection():"mongo"===o.modules.crudDb.currentDbSystem&&r.closeDbConnection()}getDb(e=null){if("mysql"===o.modules.crudDb.currentDbSystem)return n.getDbObject(e);"mongo"===o.modules.crudDb.currentDbSystem&&r.getDbObject()}init(e=null){"mysql"===o.modules.crudDb.currentDbSystem?n.connect():"mongo"===o.modules.crudDb.currentDbSystem&&r.connect().then(function(e){r.setDbConnect(e),r.setDbObject(e.db(o.modules.crudDb.name))},function(e){console.error(e)})}constructor(){return e||(e=this),e}}}();e.exports=c},function(e,t,s){const o=s(0);var r="../../..";let n=function(){return class{static init(e){e.use(["/","/index"],s(29)),e.use("/cp",s(1)(r+o.modules.childProcess.routePath)),e.use("/t",s(1)(r+o.modules.test.routePath)),e.use("/db/ms/t1",s(1)(r+o.modules.crudDb.ms.routePathT1)),e.use("/user",s(1)(r+o.modules.user.routePath)),e.use("/error",s(1)(r+o.modules.errorPages.routePath))}}}();e.exports=n},function(e,t,s){let o=s(0).tools.express.Router();o.get(["/","/index"],(e,t)=>{t.render("index",{id:"index",title:"Index Page",text:"<b>Bold Text</b>",user:t.app.locals.userData})}),e.exports=o},function(e,t,s){const o=s(0);let r=function(){return class{static init(e){e.set("port",process.env.PORT||3010),e.set("view engine",o.common.viewEngine),e.set("views",o.common.viewPath)}}}();e.exports=r},function(e,t,s){s(0);let o=function(){return class{static init(e){e.locals.siteTitle="r1-node page title",e.locals.userData={loggedIn:!0,name:"user one"}}}}();e.exports=o},function(e,t,s){var o=s(33);let r=function(){new WeakMap;return class{static init(e){e.use(o({secret:"keyboard cat",resave:!1,saveUninitialized:!0,cookie:{maxAge:6e4}}))}static db(){}}}();e.exports=r},function(e,t){e.exports=require("express-session")}]);